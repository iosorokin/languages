# Папка для размещения модулей приложения

## Container / Контейнер для контента
Служебный модуль для группировки контента <br>

## Domain / Бизнес ядро приложения
Здесь размещаются ключевые для приложения модули, отражающие его бизнес модель <br>

## Notification / Уведомления
Служебный модуль для рассылки уведомлений <br>

## Personal / Личный кабинет
Личный кабинет пользователя и всё что с ним связано


# Типовая структура модуля
private - код из этой папки разрешается использовать **ИСКЛЮЧИТЕЛЬНО** внутри модуля <br>
protected - код специального назначения для одного клиента (контроллеры, представления и тд)
public - код из этой папки разрешается использовать между модулями **ИСКЛЮЧИТЕЛЬНО** через интерфейсы <br>
## Actions (private)
Внутренний действия модуля. В основном служат для переиспользования логики из презентеров <br>
Разрешено: 
- вызывать другие экшены внутри своего модуля
- вызывать другие презентеры из внешних и своего модуля через интерфейс
Запрещено:
- вызывать экшен

## Controllers (protected)
Контроллеры модуля. Связывают ресурсный маршрут и выполнение действия над ним. <br>
Разрешено:
- вызывать другие презентеры по интерфейсу (зачастую 1 контроллер работает только с 1 презентером)
- вызывать представления
Запрещено:
- реализовывать любую логику (всё что делает контрроллер - отдает данные в презентер и оборачивает ответ в представление)

## Structures (public)
Бизнес сущности. <br>
В целях изолирования сущностей от фреймворка работа с сущностями осуществляется **ИКЛЮЧИТЕЛЬНО** через интерфейс <br>
Модели eloquent orm **ОБЯЗАНЫ** реализовать интерфейс сущности. 
Работа с моделями напрямую вне eloquent репозитория **ЗАПРЕЩЕНА**

Разрешено:
- реализовывать бизнес-логику внутри агрегата (головной сущности и её вложенных зависимых сущностях)

Запрещено:
- вызов любого кода вне своего агрегата. Бизнес сущности максимально изолированы от внешнего мира

## Factories (public)
Создание объектов **ЖЕЛАТЕЛЬНО** изолировать в фабрики. Создание сущностей **ОБЯЗАТЕЛЬНО** следует выносить в фабрику <br>
Суть фабрики сущности - собрать и отдать клиенту готовую для дальнейшей работы и сохранения сущность.

Разрешено:
- осуществлять манипуляции с сущностями, назначать дефолтные значения, делать проверки и тд.

Запрещено:
- сохранять объекты в репозиторий

## Filters (private)
Экспериментальная папка с фильтрами для гет-запросов

## Policies (public)
Политики авторизации действий в модуле. Экспериментальная реализация. <br>
На вход принимает контекст клиента (оберка над сущностью User ли пустая обертка (null object) для гостя)

Разрешено:
- проверка полномочий пользователя
- вызов других политик по их интерфейсу

Запрещено:
- любые запросы действия, отличные от проверки политик модулей

## Presenters (public)
User cases модуля. 
Все головные операции в системе из контроллера или внутри приложения вызываются **ИСКЮЧИТЕЛЬНО** через интерфейс презентера. <br>
Отдает сырую сущность или коллекцию без обработки под конкретное представление <br>
Зачастую принимают сырые данные (array). <br>
**СЛЕДУЕТ** особо контролировать входящие аргументы презентера т.к. на них завязывается работа всего приложения <br>
Внутри презентеры делятся на конкретных вызывающих клиентов (админ, гость, пользователь, сиды). <br>
Seed* презентеры назначаются для засеивания базы фейками.

Разрешено:
- (но не приветствуется) иметь простую логику (собирать объекты, делать лёгкие проверки и тд)
- вызывать любой код своего моду и других модулей (по интерфейсу)

Запрещено:
- использовать презентер без интерфейса
- отдавать представление и совершать операции переделки данных для конкретного представления

## Repositiories (public)
Связь данных с сущностью. Используется исключительно через интерфейс. 
На данный момент репозитории только для eloquent-моделей и фейки.
Использовать настоящие репозитории вне e2e тестов **ЗАПРЕЩЕНО**

## Resources (protected)
Папка представлений. Вызывается из контроллера

Разрешено:
- вызывать представления других модулей

Запрещено:
- любая логика и вычисления

## Tests (protected)
Папка с тестами. Внутри хелперы модуля **ИСЛЮЧИТЕЛЬНО** для переиспользования кода в тестах <br>
Endpoint тесты используют реальную базу. Тестируется **ИСКЛЮЧИТЕЛЬНО** 1 успешный кейс, что маршрут работает. <br>
Для того реализуется подход 1 маршрут = 1 тест, реализующий invoke. <br>
Unit и Module тесты **ОБАЗАНЫ** подменять репозитории на фейковые и фейкать внешние и зависимые от внешних сервисы

## Validators (private)
Валидаторы данных. 

## Provider(procted)
Лежит в корне модуля, все бинды интерфейсов с реализациями настраиваются здесь
